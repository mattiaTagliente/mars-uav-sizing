# Section 5 Figures - Summary

**Created:** 2025-12-29
**Purpose:** Document all figures added to Section 5 (Constraint Analysis) with generation scripts and placement rationale.

---

## Generated Figures

All figures are generated by `src/mars_uav_sizing/visualization/plotting.py` and saved to `figures/`.

| Figure | Filename | Section | Caption ID | Purpose |
|--------|----------|---------|------------|---------|
| Matching Chart | `matching_chart.png` | §5.4 | `fig:matching-chart` | Visualizes P/W vs W/S constraint diagram with hover, stall, cruise constraints and design point |
| L/D Comparison | `ld_comparison.png` | §5.4 | `fig:ld-comparison` | Compares aerodynamic efficiency across all 3 configurations |
| Power Comparison | `power_comparison.png` | §5.4 | `fig:power-comparison` | Compares hover and cruise power requirements for all 3 configurations |
| Endurance Comparison | `endurance_comparison.png` | §5.4 | `fig:endurance-comparison` | Compares achievable endurance with 60-min requirement line |
| Energy Budget | `energy_budget.png` | §5.3 | `fig:energy-budget` | Shows energy breakdown (hover/cruise/reserve) vs available for hybrid VTOL |

---

## Regenerating Figures

From the project root:

```bash
cd src
python -m mars_uav_sizing.visualization.plotting
```

This generates **10 figures** (5 English + 5 Italian):
- English: `matching_chart.png`, `power_comparison.png`, etc.
- Italian: `matching_chart_it.png`, `power_comparison_it.png`, etc.

Figures are saved to `src/figures/`. Copy to main `figures/` directory:

```powershell
Copy-Item -Path ".\src\figures\*.png" -Destination ".\figures\" -Force
```

### Language-Specific Commands

```bash
# English only
cd src
python -c "from mars_uav_sizing.visualization.plotting import generate_all_figures; generate_all_figures(lang='en')"

# Italian only
python -c "from mars_uav_sizing.visualization.plotting import generate_all_figures; generate_all_figures(lang='it')"

# Both languages (default)
python -m mars_uav_sizing.visualization.plotting
```

---

## Figure Placement in Manuscript

### English Manuscript (sections_en/)

#### Section 5.3 (Hybrid VTOL Configuration)
- **Energy Budget** (`fig:energy-budget`): `figures/energy_budget.png` - After `@tbl:energy-budget-quadplane`

#### Section 5.4 (Matching Chart Methodology)
- **L/D Comparison** (`fig:ld-comparison`): `figures/ld_comparison.png`
- **Power Comparison** (`fig:power-comparison`): `figures/power_comparison.png`
- **Endurance Comparison** (`fig:endurance-comparison`): `figures/endurance_comparison.png`
- **Matching Chart** (`fig:matching-chart`): `figures/matching_chart.png`

### Italian Manuscript (sections_it/)

#### Sezione 5.3 (Configurazione VTOL Ibrida)
- **Budget Energetico** (`fig:energy-budget`): `figures/energy_budget_it.png`

#### Sezione 5.4 (Metodologia Diagramma di Matching)
- **Confronto L/D** (`fig:ld-comparison`): `figures/ld_comparison_it.png`
- **Confronto Potenza** (`fig:power-comparison`): `figures/power_comparison_it.png`
- **Confronto Autonomia** (`fig:endurance-comparison`): `figures/endurance_comparison_it.png`
- **Diagramma di Matching** (`fig:matching-chart`): `figures/matching_chart_it.png`

---

## Design Principles

1. **Balanced Comparison**: All figures comparing configurations include all 3 options (rotorcraft, fixed-wing, hybrid VTOL) for fairness.

2. **Progressive Disclosure**: Figures are ordered to build understanding:
   - L/D → explains *why* configurations differ in efficiency
   - Power → shows *consequence* of efficiency differences
   - Endurance → shows *outcome* for mission feasibility
   - Matching chart → shows *design space* and selection

3. **Data Source**: All values come from the same configuration files (`config/*.yaml`) used by analysis scripts, ensuring consistency between text and figures.

---

## Future Figure Opportunities

### Suggested Additional Figures

| Figure Concept | Purpose | Location |
|---------------|---------|----------|
| **Sensitivity Analysis** | Show how endurance varies with key parameters (battery fraction, L/D, efficiency) | §5.4 or §9 |
| **Mission Profile Diagram** | Timeline showing hover→transition→cruise→transition→hover phases | §5.3 |
| **Configuration Schematic** | Visual comparison of 3 architectures with key components labeled | §5.4 |
| **Constraint Overlay** | All 3 configurations on single matching chart for comparison | §5.4 |
| **Range-Endurance Envelope** | Trade-off curves for different payload/battery allocations | §5.4 |

### Implementation Notes

To add new figures:

1. Add plotting function to `src/mars_uav_sizing/visualization/plotting.py`
2. Add call in `generate_all_figures()` function
3. Regenerate all figures
4. Add figure reference to appropriate manuscript section
5. Run `reconstruct.bat en` and `build_docx.bat en` to verify

---

## Cross-References

In manuscript, figures are referenced using pandoc-crossref syntax:

- `@fig:matching-chart` → Figure X (matching chart)
- `@fig:ld-comparison` → Figure Y (L/D comparison)
- `@fig:power-comparison` → Figure Z (power comparison)
- `@fig:endurance-comparison` → Figure W (endurance comparison)
- `@fig:energy-budget` → Figure V (energy budget)

---

## Data Consistency Check

Values shown in figures should match:

| Metric | Rotorcraft | Fixed-Wing | Hybrid VTOL | Source |
|--------|------------|------------|-------------|--------|
| L/D | 4.0 | 11.7 | 10.5 | Config: `aerodynamic_parameters.yaml` |
| Hover Power (W) | 3178 | N/A | 3178 | Calculated from equations |
| Cruise Power (W) | 460 | 286 | 318 | Calculated from equations |
| Endurance (min) | 57 | 151 | 81 | Calculated from equations |
| Energy Available (Wh) | 718 | 718 | 718 | Config: `battery_parameters.yaml` |

Run verification: `python -m mars_uav_sizing.section5.comparative`
